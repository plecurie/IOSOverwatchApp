'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = server;

var _core = require('../lib/core.js');

var _core2 = _interopRequireDefault(_core);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// eslint-disable-line import/no-unresolved

function server(file, opt, cb) {
  // Load mod instance.
  var mod = void 0;

  try {
    mod = require(file); // eslint-disable-line global-require
  } catch (e) {
    cb(new Error(file + ' does not exist.'));
  }

  if (typeof mod.default !== 'function') {
    cb(new Error(file + ' does not export a default function.'));
  }

  var _opt$app = opt.app;
  var port = _opt$app.port;
  var host = _opt$app.host;

  (0, _core2.default)(mod, opt).listen(port, host, function (err) {
    if (err) {
      return cb(err.stack);
    }
    return cb(null);
  });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNtZC9zZXJ2ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7a0JBRXdCLE07O0FBRnhCOzs7Ozs7QUFBbUM7O0FBRXBCLFNBQVMsTUFBVCxDQUFnQixJQUFoQixFQUFzQixHQUF0QixFQUEyQixFQUEzQixFQUErQjtBQUM1QztBQUNBLE1BQUksWUFBSjs7QUFFQSxNQUFJO0FBQ0YsVUFBTSxRQUFRLElBQVIsQ0FBTixDQURFLENBQ29CO0FBQ3ZCLEdBRkQsQ0FFRSxPQUFPLENBQVAsRUFBVTtBQUNWLE9BQUcsSUFBSSxLQUFKLENBQWEsSUFBYixzQkFBSDtBQUNEOztBQUVELE1BQUksT0FBTyxJQUFJLE9BQVgsS0FBdUIsVUFBM0IsRUFBdUM7QUFDckMsT0FBRyxJQUFJLEtBQUosQ0FBYSxJQUFiLDBDQUFIO0FBQ0Q7O0FBWjJDLGlCQWNyQixJQUFJLEdBZGlCO0FBQUEsTUFjcEMsSUFkb0MsWUFjcEMsSUFkb0M7QUFBQSxNQWM5QixJQWQ4QixZQWM5QixJQWQ4Qjs7QUFlNUMsc0JBQUksR0FBSixFQUFTLEdBQVQsRUFBYyxNQUFkLENBQXFCLElBQXJCLEVBQTJCLElBQTNCLEVBQWlDLFVBQUMsR0FBRCxFQUFTO0FBQ3hDLFFBQUksR0FBSixFQUFTO0FBQ1AsYUFBTyxHQUFHLElBQUksS0FBUCxDQUFQO0FBQ0Q7QUFDRCxXQUFPLEdBQUcsSUFBSCxDQUFQO0FBQ0QsR0FMRDtBQU1EIiwiZmlsZSI6ImNtZC9zZXJ2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc3J2IGZyb20gJy4uL2xpYi9jb3JlLmpzJzsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgaW1wb3J0L25vLXVucmVzb2x2ZWRcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2VydmVyKGZpbGUsIG9wdCwgY2IpIHtcbiAgLy8gTG9hZCBtb2QgaW5zdGFuY2UuXG4gIGxldCBtb2Q7XG5cbiAgdHJ5IHtcbiAgICBtb2QgPSByZXF1aXJlKGZpbGUpOyAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBnbG9iYWwtcmVxdWlyZVxuICB9IGNhdGNoIChlKSB7XG4gICAgY2IobmV3IEVycm9yKGAke2ZpbGV9IGRvZXMgbm90IGV4aXN0LmApKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgbW9kLmRlZmF1bHQgIT09ICdmdW5jdGlvbicpIHtcbiAgICBjYihuZXcgRXJyb3IoYCR7ZmlsZX0gZG9lcyBub3QgZXhwb3J0IGEgZGVmYXVsdCBmdW5jdGlvbi5gKSk7XG4gIH1cblxuICBjb25zdCB7IHBvcnQsIGhvc3QgfSA9IG9wdC5hcHA7XG4gIHNydihtb2QsIG9wdCkubGlzdGVuKHBvcnQsIGhvc3QsIChlcnIpID0+IHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICByZXR1cm4gY2IoZXJyLnN0YWNrKTtcbiAgICB9XG4gICAgcmV0dXJuIGNiKG51bGwpO1xuICB9KTtcbn1cbiJdfQ==