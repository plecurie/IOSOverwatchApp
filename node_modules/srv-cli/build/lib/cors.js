'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (opt) {
  var whitelist = opt.allowedOrigins || [];

  var config = {
    origin: function origin(_origin, callback) {
      // If whitelist config is empty, allow all CORS requests.
      if (whitelist.length === 0) {
        return callback(null, true);
      }

      var originIsWhitelisted = whitelist.indexOf(_origin) !== -1;
      return callback(null, originIsWhitelisted);
    }
  };

  return {
    cors: (0, _cors2.default)(config)
  };
};

var _cors = require('cors');

var _cors2 = _interopRequireDefault(_cors);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O2tCQU1lLFVBQVUsR0FBVixFQUFlO0FBQzVCLE1BQU0sWUFBWSxJQUFJLGNBQUosSUFBc0IsRUFBeEM7O0FBRUEsTUFBTSxTQUFTO0FBRWIsVUFGYSxrQkFFTixPQUZNLEVBRUUsUUFGRixFQUVZO0FBQ3ZCO0FBQ0EsVUFBSSxVQUFVLE1BQVYsS0FBcUIsQ0FBekIsRUFBNEI7QUFDMUIsZUFBTyxTQUFTLElBQVQsRUFBZSxJQUFmLENBQVA7QUFDRDs7QUFFRCxVQUFNLHNCQUFzQixVQUFVLE9BQVYsQ0FBa0IsT0FBbEIsTUFBOEIsQ0FBQyxDQUEzRDtBQUNBLGFBQU8sU0FBUyxJQUFULEVBQWUsbUJBQWYsQ0FBUDtBQUNEO0FBVlksR0FBZjs7QUFhQSxTQUFPO0FBQ0wsVUFBTSxvQkFBSyxNQUFMO0FBREQsR0FBUDtBQUdELEM7O0FBdEJEIiwiZmlsZSI6ImNvcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTZXRzICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nIENPUlMgaGVhZGVyIHRvIGFsbG93IHdoaXRlbGlzdGVkXG4vLyBkb21haW5zIHRvIGFjY2VzcyBBUEkuXG5cbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChvcHQpIHtcbiAgY29uc3Qgd2hpdGVsaXN0ID0gb3B0LmFsbG93ZWRPcmlnaW5zIHx8IFtdO1xuXG4gIGNvbnN0IGNvbmZpZyA9IHtcblxuICAgIG9yaWdpbihvcmlnaW4sIGNhbGxiYWNrKSB7XG4gICAgICAvLyBJZiB3aGl0ZWxpc3QgY29uZmlnIGlzIGVtcHR5LCBhbGxvdyBhbGwgQ09SUyByZXF1ZXN0cy5cbiAgICAgIGlmICh3aGl0ZWxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb3JpZ2luSXNXaGl0ZWxpc3RlZCA9IHdoaXRlbGlzdC5pbmRleE9mKG9yaWdpbikgIT09IC0xO1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIG9yaWdpbklzV2hpdGVsaXN0ZWQpO1xuICAgIH0sXG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBjb3JzOiBjb3JzKGNvbmZpZyksXG4gIH07XG59XG4iXX0=