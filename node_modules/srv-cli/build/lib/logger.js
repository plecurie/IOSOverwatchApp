'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (opt) {
  var logs = opt.logs || './logs';

  if (!_fs2.default.existsSync(logs)) {
    _fs2.default.mkdirSync(logs);
  }

  var logger = new _winston2.default.Logger({
    transports: [new _winston2.default.transports.File({
      level: 'info',
      filename: './' + logs + '/all-logs.log',
      handleExceptions: true,
      json: true,
      maxsize: 5242880, // 5MB
      maxFiles: 5,
      colorize: false
    }), new _winston2.default.transports.Console({
      level: 'debug',
      handleExceptions: true,
      json: false,
      colorize: true
    })],
    exitOnError: false
  });

  var stream = {
    write: function write(message) {
      logger.info(message);
    }
  };

  return {
    logger: logger,
    stream: stream
  };
};

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _winston = require('winston');

var _winston2 = _interopRequireDefault(_winston);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2dlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7a0JBR2UsVUFBVSxHQUFWLEVBQWU7QUFDNUIsTUFBTSxPQUFPLElBQUksSUFBSixJQUFZLFFBQXpCOztBQUVBLE1BQUksQ0FBQyxhQUFHLFVBQUgsQ0FBYyxJQUFkLENBQUwsRUFBMEI7QUFDeEIsaUJBQUcsU0FBSCxDQUFhLElBQWI7QUFDRDs7QUFFRCxNQUFNLFNBQVMsSUFBSSxrQkFBUSxNQUFaLENBQW1CO0FBQ2hDLGdCQUFZLENBQ1YsSUFBSSxrQkFBUSxVQUFSLENBQW1CLElBQXZCLENBQTRCO0FBQzFCLGFBQU8sTUFEbUI7QUFFMUIsdUJBQWUsSUFBZixrQkFGMEI7QUFHMUIsd0JBQWtCLElBSFE7QUFJMUIsWUFBTSxJQUpvQjtBQUsxQixlQUFTLE9BTGlCLEVBS1I7QUFDbEIsZ0JBQVUsQ0FOZ0I7QUFPMUIsZ0JBQVU7QUFQZ0IsS0FBNUIsQ0FEVSxFQVVWLElBQUksa0JBQVEsVUFBUixDQUFtQixPQUF2QixDQUErQjtBQUM3QixhQUFPLE9BRHNCO0FBRTdCLHdCQUFrQixJQUZXO0FBRzdCLFlBQU0sS0FIdUI7QUFJN0IsZ0JBQVU7QUFKbUIsS0FBL0IsQ0FWVSxDQURvQjtBQWtCaEMsaUJBQWE7QUFsQm1CLEdBQW5CLENBQWY7O0FBcUJBLE1BQU0sU0FBUztBQUNiLFNBRGEsaUJBQ1AsT0FETyxFQUNFO0FBQ2IsYUFBTyxJQUFQLENBQVksT0FBWjtBQUNEO0FBSFksR0FBZjs7QUFNQSxTQUFPO0FBQ0wsa0JBREs7QUFFTDtBQUZLLEdBQVA7QUFJRCxDOztBQXpDRDs7OztBQUNBIiwiZmlsZSI6ImxvZ2dlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgd2luc3RvbiBmcm9tICd3aW5zdG9uJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKG9wdCkge1xuICBjb25zdCBsb2dzID0gb3B0LmxvZ3MgfHwgJy4vbG9ncyc7XG5cbiAgaWYgKCFmcy5leGlzdHNTeW5jKGxvZ3MpKSB7XG4gICAgZnMubWtkaXJTeW5jKGxvZ3MpO1xuICB9XG5cbiAgY29uc3QgbG9nZ2VyID0gbmV3IHdpbnN0b24uTG9nZ2VyKHtcbiAgICB0cmFuc3BvcnRzOiBbXG4gICAgICBuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkZpbGUoe1xuICAgICAgICBsZXZlbDogJ2luZm8nLFxuICAgICAgICBmaWxlbmFtZTogYC4vJHtsb2dzfS9hbGwtbG9ncy5sb2dgLFxuICAgICAgICBoYW5kbGVFeGNlcHRpb25zOiB0cnVlLFxuICAgICAgICBqc29uOiB0cnVlLFxuICAgICAgICBtYXhzaXplOiA1MjQyODgwLCAvLyA1TUJcbiAgICAgICAgbWF4RmlsZXM6IDUsXG4gICAgICAgIGNvbG9yaXplOiBmYWxzZSxcbiAgICAgIH0pLFxuICAgICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5Db25zb2xlKHtcbiAgICAgICAgbGV2ZWw6ICdkZWJ1ZycsXG4gICAgICAgIGhhbmRsZUV4Y2VwdGlvbnM6IHRydWUsXG4gICAgICAgIGpzb246IGZhbHNlLFxuICAgICAgICBjb2xvcml6ZTogdHJ1ZSxcbiAgICAgIH0pLFxuICAgIF0sXG4gICAgZXhpdE9uRXJyb3I6IGZhbHNlLFxuICB9KTtcblxuICBjb25zdCBzdHJlYW0gPSB7XG4gICAgd3JpdGUobWVzc2FnZSkge1xuICAgICAgbG9nZ2VyLmluZm8obWVzc2FnZSk7XG4gICAgfSxcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGxvZ2dlcixcbiAgICBzdHJlYW0sXG4gIH07XG59XG4iXX0=